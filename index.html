<!doctype html>
<html lang="en">
<head>
<style type="text/css">
table {
	border-collapse: collapse;
}

td {
	border: 1px solid white;
	width: 15px;
	height: 15px;
}

.filled {
	background: red;
}
</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script>
window.addEvent('domready', function(){
	var dia = $('diameter');
	var resultblock = $('result');

	function filled(x, y, r) {
		return Math.sqrt(Math.pow(y, 2) + Math.pow(x, 2)) <= r;
	}

	function draw() {
		
		var r = parseFloat(dia.value, 10) / 2;

		var maxblocks_x, maxblocks_y;
		var img_scale = 10;
		var text = '';

		if ( (r * 2) % 2 == 0 ) {
			maxblocks_x = Math.ceil(r - .5) * 2 + 1;
			maxblocks_y = Math.ceil(r - .5) * 2 + 1;
		} else {
			maxblocks_x = Math.ceil(r) * 2;
			maxblocks_y = Math.ceil(r) * 2;
		}

		text += '<table class="circle_output">';
		for (var y = -maxblocks_y / 2; y <= maxblocks_y / 2; y++) {
			text += '<tr>';
			for (var x =- maxblocks_x / 2; x <= maxblocks_x / 2; x++) {

				xf = ( 
					filled(x + 1, y, r) &&
					filled(x - 1, y, r) &&
					filled(x, y + 1, r) &&
					filled(x, y - 1, r) &&
					filled(x + 1, y + 1, r) &&
					filled(x + 1, y - 1, r) &&
					filled(x - 1, y - 1, r) &&
					filled(x - 1, y + 1, r)
				);

				var xfilled = filled(x,y,r) && !xf;
				text += '<td class="'+(xfilled ? 'filled' : '')+'"></td>';
			}
			text += '</tr>';
		}
		text += '</table>';

		resultblock.innerHTML = text;
	}

	dia.addEvent('keydown', function(e){
		var val = parseFloat(dia.value, 10);
		if( e.key == 'up' ) {
			dia.value++;
		}else if( e.key == 'down' ) {
			dia.value--;
		}
	});

	dia.addEvent('keyup', function(){
		draw();
	});


	draw();
});

</script>
</head>

<body>
Circle Diameter: 
<input size="5" id="diameter" value="8" autocomplete="off" autofocus="autofocus"> <br />

<div id="result"></div>

</body>
</html>